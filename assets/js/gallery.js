var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var t,n,i,r,a=e.childNodes,o=a.length,l=[],d=0;o>d;d++)t=a[d],1===t.nodeType&&(n=t.children[0],i=n.getAttribute("data-size").split("x"),r={src:n.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)},t.children.length>1&&(r.title=t.children[1].innerHTML),n.children.length>0&&(r.msrc=n.children[0].getAttribute("src")),r.el=t,l.push(r));return l},n=function s(e,t){return e&&(t(e)?e:s(e.parentNode,t))},i=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement,i=n(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(i){for(var r,o=i.parentNode,l=i.parentNode.childNodes,d=l.length,g=0,s=0;d>s;s++)if(1===l[s].nodeType){if(l[s]===i){r=g;break}g++}return r>=0&&a(r,o),!1}},r=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i]){var r=n[i].split("=");r.length<2||(t[r[0]]=r[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t},a=function(e,n,i,r){var a,o,l,d=document.querySelectorAll(".pswp")[0];if(l=t(n),o={galleryUID:n.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=l[e].el.getElementsByTagName("img")[0],n=window.pageYOffset||document.documentElement.scrollTop,i=t.getBoundingClientRect();return{x:i.left,y:i.top+n,w:i.width}}},r)if(o.galleryPIDs){for(var g=0;g<l.length;g++)if(l[g].pid==e){o.index=g;break}}else o.index=parseInt(e,10)-1;else o.index=parseInt(e,10);isNaN(o.index)||(i&&(o.showAnimationDuration=0),a=new PhotoSwipe(d,PhotoSwipeUI_Default,l,o),a.init())},o=document.querySelectorAll(e),l=0,d=o.length;d>l;l++)o[l].setAttribute("data-pswp-uid",l+1),o[l].onclick=i;var g=r();g.pid&&g.gid&&a(g.pid,o[g.gid-1],!0,!0)};initPhotoSwipeFromDOM(".my-gallery");var gal=document.querySelector(".gal"),masonry=new Masonry(gal,{percentPosition:!0,itemSelector:".gal-item",isResizeBound:!0}),imgLoaded=imagesLoaded(gal,function(){masonry.layout(),eventie.bind(gal,"hover",function(e){classie.has(e.target,".gal-item")&&(classie.toggle(e.target,".gal-item--gigante"),masonry.layout())})});