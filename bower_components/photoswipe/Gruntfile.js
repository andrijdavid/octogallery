module.exports=function(s){"use strict";var e="isLocal : false \r\npermalink: /:title/ \r\nexclude: ['.json', '.rvmrc', '.rbenv-version', 'README.md', 'Rakefile','changelog.md', 'compiler.jar', 'private', '.htaccess','photoswipe.sublime-project', 'photoswipe.sublime-workspace'] \r\nauto: true \r\npswpversion: <%= pkg.version %> \r\nsiteversion: 1.0.4 \r\nmarkdown: redcarpet \r\nkramdown: \r\n  input: GFM \r\n",t={};s.file.exists("./aws-keys.json")&&(t=s.file.readJSON("./aws-keys.json")),s.initConfig({pkg:s.file.readJSON("photoswipe.json"),banner:'/*! PhotoSwipe - v<%= pkg.version %> - <%= grunt.template.today("yyyy-mm-dd") %>\n<%= pkg.homepage ? "* " + pkg.homepage + "\\n" : "" %>* Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>; */\n',defaultUIBanner:'/*! PhotoSwipe Default UI - <%= pkg.version %> - <%= grunt.template.today("yyyy-mm-dd") %>\n<%= pkg.homepage ? "* " + pkg.homepage + "\\n" : "" %>* Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>; */\n',clean:{files:["dist"]},sass:{dist:{files:{"dist/photoswipe.css":"src/css/main.scss","dist/default-skin/default-skin.css":"src/css/default-skin/default-skin.scss"}}},autoprefixer:{options:{browsers:["last 3 versions","android 3","ie 9","bb 10"]},no_dest:{src:["dist/photoswipe.css","dist/default-skin/default-skin.css"]}},jshint:{all:["Gruntfile.js","dist/photoswipe.js","dist/photoswipe-ui-default.js"],options:{jshintrc:".jshintrc"}},pswpbuild:{all:{src:["framework-bridge","core","gestures","show-hide-transition","items-controller","tap","desktop-zoom","history"],basePath:"src/js/",dest:"dist/photoswipe.js",uidest:"dist/photoswipe-ui-default.js",banner:"<%= banner %>",defaultUIBanner:"<%= defaultUIBanner %>"}},jekyll:{dev:{options:{src:"website",dest:"_site",url:"local",raw:e+"url: local"}},production:{options:{src:"website",dest:"_production",url:"production",raw:e+"url: production"}}},copy:{dev:{files:[{src:["src/css/default-skin/default-skin.svg"],dest:"dist/default-skin/default-skin.svg"},{src:["src/css/default-skin/default-skin.png"],dest:"dist/default-skin/default-skin.png"},{src:["src/css/default-skin/preloader.gif"],dest:"dist/default-skin/preloader.gif"},{expand:!0,src:["dist/**"],dest:"_site/"}]},main:{files:[{expand:!0,src:["dist/**"],dest:"website/"}]}},uglify:{my_target:{files:{"dist/photoswipe.min.js":["dist/photoswipe.js"],"dist/photoswipe-ui-default.min.js":["dist/photoswipe-ui-default.js"]},preserveComments:"some"},options:{preserveComments:"some"}},watch:{jekyll:{files:["website/**","website/documentation/**","_includes/**"],tasks:["jekyll:dev","copy:dev"]},files:["src/**"],tasks:["sass","autoprefixer","pswpbuild","copy:dev","uglify"]},cssmin:{compress:{files:{"website/site-assets/all.min.css":["website/site-assets/site.css","website/dist/photoswipe.css"]}}},svgmin:{dist:{files:{"src/css/default-skin/default-skin.svg":"src/css/default-skin/default-skin.svg"}}},aws_s3:{options:{accessKeyId:t?t.AWSAccessKeyId:"",secretAccessKey:t?t.AWSSecretKey:"",region:"eu-west-1",uploadConcurrency:5,downloadConcurrency:5},main:{options:{bucket:"photoswipe"},files:[{expand:!0,cwd:"dist/",src:["**"],dest:"pswp/dist/",params:{CacheControl:"max-age=86400"}}]}}}),s.task.registerMultiTask("pswpbuild","Makes PhotoSwipe core JS file.",function(){var e=this.data.src,t=s.option("pswp-exclude"),i=this.data.basePath,o=this.data.banner;if(o+="(function (root, factory) { \n	if (typeof define === 'function' && define.amd) {\n		define(factory);\n	} else if (typeof exports === 'object') {\n		module.exports = factory();\n	} else {\n		root.PhotoSwipe = factory();\n	}\n})(this, function () {\n\n	'use strict';\n	var PhotoSwipe = function(template, UiClass, items, options){\n",t){t=t.split(/[\s,]+/);var n=function(s){for(var e,t,i=arguments,o=i.length;o>1&&s.length;)for(e=i[--o];-1!==(t=s.indexOf(e));)s.splice(t,1);return s};t.forEach(function(t){t&&(s.log.writeln('removed "'+t+'"'),e=n(e,t))})}s.log.writeln("Your build is made of:"+e),e.forEach(function(e){o+="\n/*>>"+e+"*/\n",o+=s.file.read(i+e+".js")+"\n",o+="\n/*>>"+e+"*/\n"}),o+="	framework.extend(self, publicMethods); };\n",o+="	return PhotoSwipe;\n",o+="});",s.file.write(this.data.dest,o);var a=s.file.read(i+"ui/photoswipe-ui-default.js");a=this.data.defaultUIBanner+a,s.file.write(this.data.uidest,a)}),s.loadNpmTasks("grunt-contrib-clean"),s.loadNpmTasks("grunt-contrib-concat"),s.loadNpmTasks("grunt-contrib-uglify"),s.loadNpmTasks("grunt-contrib-jshint"),s.loadNpmTasks("grunt-contrib-watch"),s.loadNpmTasks("grunt-sass"),s.loadNpmTasks("grunt-autoprefixer"),s.loadNpmTasks("grunt-contrib-copy"),s.loadNpmTasks("grunt-jekyll"),s.loadNpmTasks("grunt-contrib-cssmin"),s.loadNpmTasks("grunt-aws-s3"),s.loadNpmTasks("grunt-svgmin"),s.registerTask("default",["sass","autoprefixer","pswpbuild","uglify","copy","jekyll:dev"]),s.registerTask("production",["sass","autoprefixer","pswpbuild","uglify","copy","cssmin","jekyll:production"]),s.registerTask("nosite",["sass","autoprefixer","pswpbuild","uglify"]),s.registerTask("hint",["jshint"]),s.registerTask("awsupload",["aws_s3"])};